<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
	page="Films";
</script>
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="session.js"></script>
<script type="text/javascript" src="header.js"></script>
<!-- #navigation -->
	<div id="contenu">
		<h2>Mes films</h2>
		<table border="0" class="listeFilm" id="listeFilm" width="100%">
			<tr class="titreTab" align="center">
				<td width="10%"><h4>Titre</h4></td>
				<td width="40%"><h4>Synopsis</h4></td>
				<td width="10%"><h4>R&eacute;alisateur</h4></td>
				<td width="10%"><h4>Sortie</h4></td>
				<td width="10%"><h4>Dur&eacute;e (min)</h4></td>
				<td width="10%"><h4>Note</h4></td>
				<td width="10%"><h4>Vu</h4></td>
			</tr>
		</table>
		
		<script type="text/javascript">
			$.ajax({
				type: "GET",
				url: "http://perso.imerir.com/cpy/Seen/listeVu.php?quoi=f&nb=100",
				dataType : "html",
				contentType: 'Content-type: text/plain; charset=iso-8859-15',
			    // This is the imporant part!!!
			    beforeSend: function(jqXHR) {
			        jqXHR.overrideMimeType('text/html;charset=iso-8859-15');
			    },
				success:function(data){
					remplirTableaux(data);			
				}
			});

			function remplirTableaux(json){
				json = JSON.parse(json);
				for (var i = 0; i < json.film.length; i++) {
					$("#listeFilm").append("<tr><td>"+json.film[i].titre_f+"</td><td>"+json.film[i].synopsis_f+"</td><td>"+json.film[i].realisateur_f+"</td><td align='center'>"+json.film[i].date_sortie_f+"</td><td align='center'>"+Math.floor(json.film[i].duree_f/60)+"</td><td align='center'>"+json.film[i].note_fm+"</td><td align='center'>"+json.film[i].date_fm+"</td></tr>")
				}				
			}
		</script>
	</div><!-- #contenu -->
<script type="text/javascript" src="footer.js"></script>